(this["webpackJsonpalt_force-covid"]=this["webpackJsonpalt_force-covid"]||[]).push([[0],{100:function(e,t,a){e.exports=a(131)},111:function(e,t,a){},112:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(62),o=a.n(r),l=a(64),i=a(3),s=a(42),u=a(11),d=a.n(u),m=a(24),p=a(9),h=a(99),b=a(95),v=function(){return window.history.replaceState({},document.title,window.location.pathname)},f=c.a.createContext(),g=function(e){var t=e.children,a=e.onRedirectCallback,r=void 0===a?v:a,o=Object(h.a)(e,["children","onRedirectCallback"]),l=Object(n.useState)(),i=Object(p.a)(l,2),s=i[0],u=i[1],g=Object(n.useState)(),_=Object(p.a)(g,2),E=_[0],O=_[1],x=Object(n.useState)(),j=Object(p.a)(x,2),y=j[0],C=j[1],k=Object(n.useState)(!0),w=Object(p.a)(k,2),T=w[0],N=w[1],I=Object(n.useState)(!1),S=Object(p.a)(I,2),D=S[0],R=S[1];Object(n.useEffect)((function(){(function(){var e=Object(m.a)(d.a.mark((function e(){var t,a,n,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)(o);case 2:if(t=e.sent,C(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,r(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(c=e.sent,u(c),!c){e.next=19;break}return e.next=17,t.getUser();case 17:l=e.sent,O(l);case 19:N(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var A=function(){var e=Object(m.a)(d.a.mark((function e(){var t,a,n=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},R(!0),e.prev=2,e.next=5,y.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,R(!1),e.finish(10);case 13:return e.next=15,y.getUser();case 15:a=e.sent,O(a),u(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,y.handleRedirectCallback();case 3:return e.next=5,y.getUser();case 5:t=e.sent,N(!1),u(!0),O(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(f.Provider,{value:{isAuthenticated:s,user:E,loading:T,popupOpen:D,loginWithPopup:A,handleRedirectCallback:V,getIdTokenClaims:function(){return y.getIdTokenClaims.apply(y,arguments)},loginWithRedirect:function(){return y.loginWithRedirect.apply(y,arguments)},getTokenSilently:function(){return y.getTokenSilently.apply(y,arguments)},getTokenWithPopup:function(){return y.getTokenWithPopup.apply(y,arguments)},logout:function(){return y.logout.apply(y,arguments)}}},t)},_=a(77),E=a(15),O=Object(E.a)(),x=a(41),j=a(12),y={id:"",name:"",email:"",coords:"",govtHospital:!1,ambulance:!1,covidExclusive:!1,data:{accepting:!0,emptyBeds:0,emptyVentilators:0,covidPatients:0,covidBeds:0,lastUpdated:"Now"}},C=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0,c=new Date,r=c.getHours()<=9?"0".concat(c.getHours()):c.getHours(),o=c.getMinutes()<=9?"0".concat(c.getMinutes()):c.getMinutes(),l=c.getHours()<12?"AM":"PM",i="at ".concat(r,":").concat(o).concat(l);switch(n.type){case"UPDATE_VALUE":return Object(j.a)(Object(j.a)({},a),{},{data:Object(j.a)(Object(j.a)({},a.data),{},(e={},Object(x.a)(e,n.valType,n.value),Object(x.a)(e,"lastUpdated",i),e))});case"TOGGLE_STATUS":return Object(j.a)(Object(j.a)({},a),{},{data:Object(j.a)(Object(j.a)({},a.data),{},(t={},Object(x.a)(t,n.toggleLabel,n.toggleResult),Object(x.a)(t,"lastUpdated",i),t))});case"TEMP_STORE":return Object(j.a)(Object(j.a)({},n.store),{},{lastUpdated:i});case"INIT_DASHBOARD":return Object(j.a)(Object(j.a)({},n.store),{},{id:n.id,lastUpdated:i});default:return a}},k=(a(111),a(112),a(72)),w=a(26),T=a(82),N=a.n(T),I=function(e){var t={backgroundColor:e.bgColor};return c.a.createElement("button",{className:N.a.btn,style:t,onClick:e.click,type:"button"},c.a.createElement("span",{className:N.a.btnText},e.title))},S=a(5),D=a(53),R=a(4),A=a.n(R),V=a(54),U=a.n(V),H=new D.a.WebAuth({clientID:"X6vuD8AiLJrjU2r2M5gomQARWvZKdycL",domain:"alt-force.us.auth0.com",redirectUri:"http://localhost:3000",responseType:"token id_token",audience:"https://alt-force/api"}),B=w.b({name:w.c().required(),email:w.c().email().required(),govtHospital:w.a().required(),covidExclusive:w.a().required(),ambulance:w.a().required()}),P=Object(S.f)((function(e){document.title="Register | Alt-Force COVID-19";var t=Object(i.c)((function(e){return e})),a=Object(i.b)(),n={name:t.name,email:t.email,govtHospital:t.govtHospital,ambulance:t.ambulance,covidExclusive:t.covidExclusive};return c.a.createElement("div",{className:["d-flex flex-column align-items-center text-center",A.a.Register].join(" ")},c.a.createElement(k.a,{initialValues:n,validationSchema:B,onSubmit:function(){var n=Object(m.a)(d.a.mark((function n(c,r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:navigator.geolocation.getCurrentPosition((function(n){var r=Object(j.a)(Object(j.a)({},t),{},{name:c.name,email:c.email,govtHospital:c.govtHospital,ambulance:c.ambulance,covidExclusive:c.covidExclusive,coords:[n.coords.latitude,n.coords.longitude]});a({type:"TEMP_STORE",store:r}),H.passwordlessStart({connection:"email",send:"code",email:c.email},(function(t,a){t?console.log(t):(console.log(a),localStorage.setItem("altForce_hospital",JSON.stringify(r)),e.history.push("/verify"))}))}));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},(function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit,className:A.a.formContainer},c.a.createElement("div",{className:A.a.formHeader},c.a.createElement("p",null,"Alt-Force COVID-19 EasyHospital Dashboard"),c.a.createElement("p",null,"Register")),c.a.createElement("div",{className:A.a.formInputContainer},c.a.createElement("label",null,"Name: "),c.a.createElement("input",{name:"name",type:"text",placeholder:"Hospital Name",autoComplete:"off",onChange:e.handleChange("name"),value:e.values.name})),c.a.createElement("div",{className:A.a.formInputContainer},c.a.createElement("label",null,"Email: "),c.a.createElement("input",{name:"email",type:"email",placeholder:"Email ID",autoComplete:"off",onChange:e.handleChange("email"),value:e.values.email})),c.a.createElement("div",{className:A.a.checkboxContainer},c.a.createElement("div",{className:A.a.checkboxInputs},c.a.createElement("label",{className:A.a.checkboxLabel},"Government Hospital?"),c.a.createElement("label",{className:A.a.switch},c.a.createElement("input",{name:"govtHospital",type:"checkbox",checked:e.values.govtHospital,onChange:e.handleChange("govtHospital"),value:e.values.govtHospital}),c.a.createElement("span",{className:[A.a.slider,A.a.round].join(" ")}))),c.a.createElement("div",{className:A.a.checkboxInputs},c.a.createElement("label",{className:A.a.checkboxLabel},"COVID-19 Exclusive?"),c.a.createElement("label",{className:A.a.switch},c.a.createElement("input",{name:"covidExclusive",type:"checkbox",checked:e.values.covidExclusive,onChange:e.handleChange("covidExclusive"),value:e.values.covidExclusive}),c.a.createElement("span",{className:[A.a.slider,A.a.round].join(" ")}))),c.a.createElement("div",{className:A.a.checkboxInputs},c.a.createElement("label",{className:A.a.checkboxLabel},"Ambulance Facility?"),c.a.createElement("label",{className:A.a.switch},c.a.createElement("input",{name:"ambulance",type:"checkbox",checked:e.values.ambulance,onChange:e.handleChange("ambulance"),value:e.values.ambulance}),c.a.createElement("span",{className:[A.a.slider,A.a.round].join(" ")})))),c.a.createElement(I,{title:"NEXT",bgColor:"#25CEDE",click:e.submitForm}))})))})),L=a(59),F=a.n(L),X=new D.a.WebAuth({clientID:"X6vuD8AiLJrjU2r2M5gomQARWvZKdycL",domain:"alt-force.us.auth0.com",redirectUri:"http://localhost:3000",responseType:"token id_token",audience:"https://alt-force/api"}),W=w.b({code:w.c().required().length(6)}),J=Object(S.f)((function(e){document.title="Verify | Alt-Force COVID-19";var t=Object(i.c)((function(e){return e}));Object(i.b)();return 0==t.email.length&&e.history.push("/"),c.a.createElement("div",{className:["d-flex flex-column align-items-center text-center",F.a.Register].join(" ")},c.a.createElement(k.a,{initialValues:{code:""},validationSchema:W,onSubmit:function(a,n){X.passwordlessLogin({connection:"email",email:t.email,verificationCode:"".concat(a.code)},(function(t,a){t?(console.log(t),localStorage.removeItem("hospital"),e.history.push("/register")):console.log(a)}))}},(function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit,className:F.a.formContainer},c.a.createElement("div",{className:F.a.formHeader},c.a.createElement("p",null,"Alt-Force COVID-19 Dashboard"),c.a.createElement("p",null,"Verification")),c.a.createElement("div",{className:F.a.formInputContainer},c.a.createElement("label",null,"OTP: "),c.a.createElement("input",{name:"otp",type:"number",placeholder:"XXXXXX",autoComplete:"off",onChange:e.handleChange("code"),value:e.values.code})),c.a.createElement(I,{title:"VERIFY",bgColor:"#25CEDE",click:e.submitForm}))})))})),M=a(60),q=a.n(M),K=function(e){var t=Object(i.c)((function(e){return e})),a=Object(i.b)(),r=Object(n.useState)(!1),o=Object(p.a)(r,2),l=o[0],s=o[1],u=function(){var n=Object(m.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!=l){n.next=5;break}return a({type:"UPDATE_VALUE",valType:e.valType,value:e.value}),n.next=4,U.a.patch("http://alt-force-hack-jaipur.herokuapp.com/api/hospital/".concat(localStorage.getItem("altForce_hId"),"/?format=json"),{empty_beds:t.data.emptyBeds,empty_ventilators:t.data.emptyVentilators,covid_patients:t.data.covidPatients,empty_covid_beds:t.data.covidBeds,last_updated:t.data.lastUpdated});case 4:n.sent;case 5:s(!l);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return c.a.createElement("div",{className:q.a.Card},c.a.createElement("div",{className:q.a.cardTitleContainer},c.a.createElement("p",{className:q.a.cardTitle},e.title)),c.a.createElement("div",{className:q.a.cardValue},c.a.createElement("input",{type:"text",name:"cardValue",value:e.value,onChange:function(t){return e.changeVal(t.target.value)},readOnly:!l})),l?c.a.createElement(I,{title:"CONFIRM",bgColor:"#FA6E64",click:u}):c.a.createElement(I,{title:"UPDATE",bgColor:"#25CEDE",click:u}))},G=function(e){var t=Object(i.c)((function(e){return e})),a=Object(n.useState)(t.data.covidBeds),r=Object(p.a)(a,2),o=r[0],l=r[1];return c.a.createElement(K,{title:"Beds for COVID-19 Patients",valType:"covidBeds",value:o,changeVal:function(e){return function(e){l(""==e?0:parseInt(e))}(e)}})},Z=function(e){var t=Object(i.c)((function(e){return e})),a=Object(n.useState)(t.data.covidPatients),r=Object(p.a)(a,2),o=r[0],l=r[1];return c.a.createElement(K,{title:"COVID-19 Patients",valType:"covidPatients",value:o,changeVal:function(e){return function(e){l(""==e?0:parseInt(e))}(e)}})},Q=function(e){var t=Object(i.c)((function(e){return e})),a=Object(n.useState)(t.data.emptyBeds),r=Object(p.a)(a,2),o=r[0],l=r[1];return c.a.createElement(K,{title:"Empty Beds",valType:"emptyBeds",value:o,changeVal:function(e){return function(e){l(""==e?0:parseInt(e))}(e)}})},z=function(e){var t=Object(i.c)((function(e){return e})),a=Object(n.useState)(t.data.emptyVentilators),r=Object(p.a)(a,2),o=r[0],l=r[1];return c.a.createElement(K,{title:"Empty Ventilators",valType:"emptyVentilators",value:o,changeVal:function(e){return function(e){l(""==e?0:parseInt(e))}(e)}})},Y=a(78),$=a.n(Y),ee=function(e){return c.a.createElement("label",{className:$.a.switch},c.a.createElement("input",{name:"switchBtn",type:"checkbox",checked:e.label,value:e.label,onChange:e.setLabel}),c.a.createElement("span",{className:[$.a.slider,$.a.round].join(" ")}))},te=a(37),ae=a.n(te),ne=Object(S.f)((function(e){document.title="Dashboard | Alt-Force COVID-19";var t=new D.a.WebAuth({clientID:"X6vuD8AiLJrjU2r2M5gomQARWvZKdycL",domain:"alt-force.us.auth0.com",redirectUri:"http://localhost:3000",responseType:"token id_token",audience:"https://alt-force/api"}),a=Object(i.b)();if(window.location.hash){var r=JSON.parse(localStorage.getItem("altForce_hospital"));t.parseHash({hash:window.location.hash},function(){var e=Object(m.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.abrupt("return",console.log(t));case 4:if(!n){e.next=17;break}return localStorage.setItem("altForce_hId",n.idTokenPayload.sub.split("|")[1]),a({type:"INIT_DASHBOARD",store:JSON.parse(localStorage.getItem("altForce_hospital")),id:localStorage.getItem("altForce_hId")}),e.prev=7,e.next=10,U()({method:"post",url:"http://alt-force-hack-jaipur.herokuapp.com/api/hospital/?format=json",headers:{"Content-Type":"application/json",Authorization:n.accessToken},data:{id:n.idTokenPayload.sub.split("|")[1],hospital_name:r.name,email:r.email,latitude:r.coords[0],longitude:r.coords[1],government_hospital:r.govtHospital,ambulance_facility:r.ambulance,covid_exclusive:r.covidExclusive,accepting_covid_patients:r.data.accepting,empty_beds:r.data.emptyBeds,empty_ventilators:r.data.emptyVentilators,covid_patients:r.data.covidPatients,empty_covid_beds:r.data.covidBeds,last_updated:r.data.lastUpdated}});case 10:e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),console.log(e.t0);case 16:return e.abrupt("return",console.log(n));case 17:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t,a){return e.apply(this,arguments)}}())}else e.history.push("/register");var o=Object(i.c)((function(e){return e})),l=Object(n.useState)(o.data.accepting),s=Object(p.a)(l,2),u=s[0],h=s[1];console.log(o);var b=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"TOGGLE_STATUS",toggleLabel:"accepting",toggleResult:!u}),e.next=3,U.a.patch("http://alt-force-hack-jaipur.herokuapp.com/api/hospital/".concat(localStorage.getItem("altForce_hId"),"/?format=json"),{accepting_covid_patients:o.data.accepting});case 3:e.sent,h(!u);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:["d-flex flex-column align-items-center text-center",ae.a.Dashboard].join(" ")},c.a.createElement("div",{className:["row w-100 px-5 py-4",ae.a.header].join(" ")},c.a.createElement("div",{className:["col-6 text-left",ae.a.headerText].join(" ")},"EasyHospital"),c.a.createElement("div",{className:["col-6 text-right",ae.a.headerText].join(" ")},o.name)),c.a.createElement("div",{className:"my-3 d-flex flex-row flex-wrap text-center justify-content-around align-items-center",style:{width:"90%"}},c.a.createElement(Q,null),c.a.createElement(z,null),c.a.createElement(Z,null),c.a.createElement(G,null)),c.a.createElement("div",{className:["row w-100 px-5 py-4",ae.a.footer].join(" ")},c.a.createElement("div",{className:["col-5 text-left ml-1",ae.a.footerText].join(" ")},"Accepting COVID-19 Patients?",c.a.createElement(ee,{label:u,setLabel:b})),c.a.createElement("div",{className:["col-5 offset-1 text-right mr-1",ae.a.footerText].join(" ")},"Last Updated ",o.data.lastUpdated)))}));var ce=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(S.c,null,c.a.createElement(S.a,{path:"/register",component:P}),c.a.createElement(S.a,{path:"/verify",component:J}),c.a.createElement(S.a,{path:"/",component:ne,exact:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=Object(l.b)(C,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(c.a.createElement(g,{domain:_.domain,client_id:_.clientId,redirect_uri:window.location.origin,audience:_.audience,onRedirectCallback:function(e){O.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},c.a.createElement(i.a,{store:re},c.a.createElement(s.a,null,c.a.createElement(ce,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,a){e.exports={Dashboard:"Dashboard_Dashboard__jFBog",header:"Dashboard_header__vkBFB",footer:"Dashboard_footer__3efHK",headerText:"Dashboard_headerText__1f46T",footerText:"Dashboard_footerText__2Sh3y"}},4:function(e,t,a){e.exports={Register:"Register_Register__28yeG",formContainer:"Register_formContainer__1C5mK",formHeader:"Register_formHeader__2J_JR",formInputContainer:"Register_formInputContainer__22BFl",checkboxContainer:"Register_checkboxContainer__1__ay",checkboxInputs:"Register_checkboxInputs__ZuyUX",checkboxLabel:"Register_checkboxLabel__1wyfu",switch:"Register_switch__3AlWj",slider:"Register_slider__3YeKA",round:"Register_round__2dh08"}},59:function(e,t,a){e.exports={Register:"OTP_Register__2NkkQ",formContainer:"OTP_formContainer__3dBir",formHeader:"OTP_formHeader__2qKre",formInputContainer:"OTP_formInputContainer__10q9h"}},60:function(e,t,a){e.exports={Card:"Card_Card__XAwWu",cardTitleContainer:"Card_cardTitleContainer__3JonN",cardTitle:"Card_cardTitle___3SCX",cardValue:"Card_cardValue__3GZxK"}},77:function(e){e.exports=JSON.parse('{"domain":"alt-force.us.auth0.com","clientId":"X6vuD8AiLJrjU2r2M5gomQARWvZKdycL","audience":"https://alt-force/api"}')},78:function(e,t,a){e.exports={switch:"SwitchBtn_switch__3-a4S",slider:"SwitchBtn_slider__z0Hph",round:"SwitchBtn_round__1bvO9"}},82:function(e,t,a){e.exports={btn:"CustomBtn_btn__3qyx9",btnText:"CustomBtn_btnText__1XeL7"}}},[[100,1,2]]]);
//# sourceMappingURL=main.92e5aa0f.chunk.js.map